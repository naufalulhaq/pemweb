<!DOCTYPE html>
<html>
    
<head>
    <title>Graph</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="materialize/materialize.min.css" media="screen,projection" />
    <!--    Import chartJS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body class="grey lighten-3">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/materialize.min.js"></script>
    <div class="header">
        <div class="row">
            <div class="col s12 l2">
                <div class="logo"><img src="mit.png" alt="" style="width: 20%"></div>
            </div>
            <div class="col s12 l6"></div>
            <div class="col s12 l4">
                <div class="right-align flow-text">
                    <p><span id="datetime"></span></p>
                    <script>
                        var dt = new Date();
                        document.getElementById("datetime").innerHTML = dt.toLocaleString();
                    </script>
                </div>
            </div>
        </div>
    <div class="container col offset-l4 m6 s12">
        <canvas id="myChart"></canvas>
    </div>
    
    <script>
        var requestOptions = {
        method: "GET",
        redirect: "follow",
    };
        fetch("graphnde.php", requestOptions)
            .then((response) => response.json())
            .then((result) => {
              console.log(result)
              let stock = [];
              result.data.forEach((element) => {
                stock.push(element["stock"]);
              });
              let year = [];
              result.data.forEach((element) => {
                year.push(element["year"]);
              });
    
    const labels = year;
    const data = {
      labels: labels,
      datasets: [{
        label: 'Data Stock Ginjal',
        data: stock,
        backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(255, 206, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(153, 102, 255, 0.5)',
                'rgba(255, 159, 64, 0.5)'
        ],
        borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
        ],
        borderWidth: 2
      }]
    };
    
    const config = {
      type: 'bar',
      data: data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
    };
    
        
        var myChart = new Chart(document.getElementById("myChart"), config);
    })
    .catch((error) => console.log("error", error));
    </script>
    
    
    
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="materialize/materialize.min.js"></script>
</body>
</html>